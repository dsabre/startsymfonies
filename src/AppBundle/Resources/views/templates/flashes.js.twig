{% trans_default_domain 'admin' %}

{% set flashes = app.session.flashBag.all %}
{% for type, messages in flashes %}
	{% for k, message in messages %}
		{% set messages = messages|array_replace(k, message|trans) %}
	{% endfor %}

	{% set flashes = flashes|merge({(type): messages}) %}
{% endfor %}

$(function(){
	toastr.options = {
		"closeButton"       : false,
		"debug"             : false,
		"newestOnTop"       : false,
		"progressBar"       : false,
		"positionClass"     : "toast-bottom-right",
		"preventDuplicates" : false,
		"onclick"           : null,
		"showDuration"      : "300",
		"hideDuration"      : "1000",
		"timeOut"           : "5000",
		"extendedTimeOut"   : "1000",
		"showEasing"        : "swing",
		"hideEasing"        : "linear",
		"showMethod"        : "fadeIn",
		"hideMethod"        : "fadeOut"
	};

	const flashes = JSON.parse('{{ flashes|json_encode }}');

	$.each(flashes, function(type, messages){
		$.each(messages, function(k, message){
			toastr[type](message);
		});
	});
});